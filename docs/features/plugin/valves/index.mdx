---
sidebar_position: 3
title: "ğŸ”„ é˜€é—¨"
---

## é˜€é—¨

é˜€é—¨ï¼ˆValvesï¼‰å’Œç”¨æˆ·é˜€é—¨ï¼ˆUserValvesï¼‰ç”¨äºè®©ç”¨æˆ·æä¾›åŠ¨æ€ä¿¡æ¯ï¼Œä¾‹å¦‚ API å¯†é’¥æˆ–é…ç½®é€‰é¡¹ã€‚è¿™äº›ä¼šåœ¨ GUI èœå•ä¸­ä¸ºæŒ‡å®šçš„åŠŸèƒ½åˆ›å»ºä¸€ä¸ªå¯å¡«å†™çš„å­—æ®µæˆ–å¸ƒå°”å¼€å…³ã€‚å®ƒä»¬å§‹ç»ˆæ˜¯å¯é€‰çš„ï¼Œä½†å¼ºçƒˆå»ºè®®ä½¿ç”¨ã€‚

å› æ­¤ï¼ŒValves å’Œ UserValves ç±»å¯ä»¥å®šä¹‰åœ¨ `Pipe`ã€`Pipeline`ã€`Filter` æˆ– `Tools` ç±»ä¸­ã€‚

é˜€é—¨åªèƒ½ç”±ç®¡ç†å‘˜é€šè¿‡å·¥å…·æˆ–åŠŸèƒ½èœå•é…ç½®ï¼Œè€Œç”¨æˆ·é˜€é—¨åˆ™å¯ä»¥ç”±ä»»ä½•ç”¨æˆ·ç›´æ¥ä»èŠå¤©ä¼šè¯ä¸­é…ç½®ã€‚

<details>
<summary>å¸¦æ³¨é‡Šçš„ç¤ºä¾‹</summary>

```python

from pydantic import BaseModel, Field
from typing import Literal

# å®šä¹‰é˜€é—¨
class Filter:
   # æ³¨æ„å½“å‰çš„ç¼©è¿›ï¼šé˜€é—¨å’Œç”¨æˆ·é˜€é—¨å¿…é¡»å£°æ˜ä¸º
   # Toolsã€Filter æˆ– Pipe ç±»çš„å±æ€§ã€‚è¿™é‡Œä»¥ Filter ä¸ºç¤ºä¾‹ã€‚
   class Valves(BaseModel):
       # Valves å’Œ UserValves ç»§æ‰¿è‡ª pydantic&apos;s BaseModelã€‚
       # è¿™å…è®¸å¤æ‚çš„ç”¨ä¾‹ï¼Œå¦‚æ¨¡å‹éªŒè¯ç­‰ã€‚
       test_valve: int = Field(  # æ³¨æ„ç±»å‹æç¤ºï¼šå®ƒç”¨äº
           # é€‰æ‹©è¦å‘ç”¨æˆ·æ˜¾ç¤ºçš„ UI å…ƒç´ ç±»å‹ï¼ˆæŒ‰é’®ã€æ–‡æœ¬ç­‰ï¼‰ã€‚
           default=4,
           description="æ§åˆ¶æ•°å€¼çš„é˜€é—¨"
           # required=False,  # ä½ å¯ä»¥é€šè¿‡å°†å…¶è®¾ä¸º True æ¥å¼ºåˆ¶è¦æ±‚å­—æ®µ
       )
       # è¦è®©ç”¨æˆ·åœ¨å¤šä¸ªå­—ç¬¦ä¸²ä¹‹é—´é€‰æ‹©ï¼Œå¯ä»¥ä½¿ç”¨ typing ä¸­çš„ Literalï¼š
       choice_option: Literal["choiceA", "choiceB"] = Field(
           default="choiceA",
           description="ä¸€ä¸ªå¤šé€‰é˜€é—¨çš„ç¤ºä¾‹",
       )
       priority: int = Field(
           default=0,
           description="è¿‡æ»¤å™¨æ“ä½œçš„ä¼˜å…ˆçº§ã€‚è¾ƒä½çš„å€¼å…ˆé€šè¿‡"
       )
       # priority å­—æ®µæ˜¯å¯é€‰çš„ï¼Œä½†å¦‚æœå­˜åœ¨ï¼Œå°†ç”¨äºæ’åºè¿‡æ»¤å™¨ã€‚
       pass
       # æ³¨æ„è¿™ä¸ª &apos;pass&apos; æœ‰åŠ©äºè§£æï¼Œæ¨èä½¿ç”¨ã€‚

   # ç”¨æˆ·é˜€é—¨çš„å®šä¹‰æ–¹å¼æ˜¯ç›¸åŒçš„ã€‚
   class UserValves(BaseModel):
       test_user_valve: bool = Field(
           default=False, description="ä¸€ä¸ªæ§åˆ¶ True/False (å¼€/å…³)å¼€å…³çš„ç”¨æˆ·é˜€é—¨"
       )
       pass

   def __init__(self):
       self.valves = self.Valves()
       # ç”±äºå®ƒä»¬æ˜¯ç”±ç®¡ç†å‘˜è®¾ç½®çš„ï¼Œå› æ­¤å¯ä»¥ç›´æ¥åœ¨ä»£ç æ‰§è¡Œæ—¶è®¿é—®ã€‚
       pass

   # inlet æ–¹æ³•ä»…ç”¨äº Filterï¼Œä½† __user__ çš„å¤„ç†æ–¹å¼æ˜¯ç›¸åŒçš„
   def inlet(self, body: dict, __user__: dict):
       # ç”±äºç”¨æˆ·é˜€é—¨æ˜¯ä¸ºæ¯ä¸ªç”¨æˆ·å®šä¹‰çš„ï¼Œå› æ­¤åªæœ‰åœ¨ä½¿ç”¨æ—¶æ‰å¯ç”¨ã€‚
       # æ³¨æ„ï¼Œè™½ç„¶ __user__ æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œä½† __user__["valves"] æ˜¯ä¸€ä¸ª
       # UserValves å¯¹è±¡ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥åƒè¿™æ ·è®¿é—®å€¼ï¼š
       test_user_valve = __user__["valves"].test_user_valve
       # æˆ–è€…ï¼š
       test_user_valve = dict(__user__["valves"])["test_user_valve"]
       # ä½†æ˜¯è¿™å°†è¿”å›é»˜è®¤å€¼è€Œä¸æ˜¯å®é™…å€¼ï¼š
       # test_user_valve = __user__["valves"]["test_user_valve"]  # ä¸è¦è¿™æ ·åšï¼
```

</details>

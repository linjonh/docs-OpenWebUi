---
sidebar_position: 4
title: "⚙️ チャットパラメータ"
---

Open WebUIでは、**システムプロンプト**と**高度なパラメータ**を設定するために、以下の3つのレベルが用意されています：チャット単位、モデル単位、アカウント単位。この階層構造により、柔軟性を持ちながら、組織的な管理と制御が可能になります。

## システムプロンプトと高度なパラメータの階層図

| **レベル** | **定義** | **変更権限** | **上書き能力** |
| --- | --- | --- | --- |
| **チャット単位** | 特定のチャットインスタンスにおけるシステムプロンプトと高度なパラメータ | ユーザーが変更可能、ただしモデル固有の設定は上書き不可 | モデル固有の設定を上書き不可 |
| **アカウント単位** | 特定のユーザーアカウントのデフォルトシステムプロンプトと高度なパラメータ | ユーザーが設定可能、ただしモデル固有の設定により上書きされる可能性あり | ユーザー設定がモデル固有の設定により上書きされる可能性あり |
| **モデル単位** | 特定のモデルのデフォルトシステムプロンプトと高度なパラメータ | 管理者が設定可能、ユーザーが変更不可 | 管理者特有の設定が優先され、ユーザー設定は上書きされる可能性あり |

### 1. **チャット単位:**

- **説明**: チャット単位の設定は、特定のチャットインスタンスに対して設定されるシステムプロンプトと高度なパラメータを指します。これらの設定は現在の会話にのみ適用され、将来のチャットには影響しません。
- **設定方法**: ユーザーは、Open WebUIの右サイドバーの**チャットコントロール**セクション内で、特定のチャットインスタンスに対するシステムプロンプトと高度なパラメータを変更できます。
- **上書き能力**: ユーザーは、管理者がモデル単位（**#2**）で設定した**システムプロンプト**または特定の**高度なパラメータ**を上書きすることが制限されています。これによりモデル固有の設定の一貫性と遵守が保証されます。

<details>
<summary>使用例</summary>
:::tip **チャット単位**:
例えば、ユーザーが特定の会話のためにカスタムシステムプロンプトを設定したい場合、**チャットコントロール**セクションにアクセスし、**システムプロンプト**フィールドを変更することで行えます。これらの変更は現在のチャットセッションにのみ適用されます。
:::
</details>

### 2. **アカウント単位:**

- **説明**: アカウント単位の設定は、特定のユーザーアカウントに対して設定されるデフォルトのシステムプロンプトと高度なパラメータを指します。ユーザー固有の変更は、下位レベルの設定が定義されていない場合のフォールバックとして機能します。
- **設定方法**: ユーザーは、自分のアカウント用にシステムプロンプトと高度なパラメータを、Open WebUIの**設定**メニュー内の**一般**セクションで設定できます。
- **上書き能力**: ユーザーは自分のアカウントでシステムプロンプトを設定することができますが、管理者が特定のモデルに対して**システムプロンプト**または特定の**高度なパラメータ**をすでに設定している場合、それらのパラメータにより上書きされる可能性があります。

<details>
<summary>使用例</summary>
:::tip **アカウント単位**:
例えば、ユーザーが自分のアカウントに対してシステムプロンプトを設定したい場合、**設定**メニューにアクセスし、**システムプロンプト**フィールドを変更することで行えます。
:::
</details>

### 3. **モデル単位:**

- **説明**: モデル単位の設定は、特定のモデルに対して設定されるデフォルトのシステムプロンプトと高度なパラメータを指します。この設定は、そのモデルを使用するすべてのチャットインスタンスに適用されます。
- **設定方法**: 管理者は、Open WebUIの**作業スペース**内の**モデル**セクションで、特定のモデルのデフォルトシステムプロンプトと高度なパラメータを設定できます。
- **上書き能力**: **ユーザー**アカウントは、モデル単位（**#3**）で設定されている**システムプロンプト**や特定の**高度なパラメータ**を変更することが制限されています。この制限により、デフォルト設定が不適切に変更されるのを防ぎます。
- **コンテキスト長の保持:** 管理者が**作業スペース**セクションで手動設定した**システムプロンプト**または特定の**高度なパラメータ**は、**一般**設定や**チャットコントロール**セクションで**ユーザー**アカウントによって上書きまたは調整されることはありません。これにより、一貫性が確保され、ユーザーのコンテキスト長設定が変更されるたびにモデルが過剰にリロードされるのを防ぎます。
- **モデルの優先順位:** 管理者が**作業スペース**セクションでモデルの**システムプロンプト**または特定の**高度なパラメータ**値を事前設定している場合、**一般**設定や**チャットコントロール**セクションで**ユーザー**アカウントが行ったコンテキスト長の変更は無視され、当該モデルの事前設定値が維持されます。ただし、**管理者**アカウントによって未設定のパラメータは、**アカウント単位**や**チャット単位**で**ユーザー**アカウントによって手動調整される可能性があります。

<details>
<summary>使用例</summary>
:::tip **モデル単位での設定**:
管理者が特定のモデルにデフォルトのシステムプロンプトを設定したいと仮定します。これを行うには、**モデル**セクションにアクセスし、該当するモデルの**システムプロンプト**フィールドを変更します。そのモデルを使用するチャットインスタンスは、自動的にモデルのシステムプロンプトと高度なパラメータを使用します。
:::
</details>


## **システムプロンプト設定の柔軟性を最大化するための最適化**

:::tip **お得なヒント**
**このヒントは管理者およびユーザーアカウントの両方に適用されます。システムプロンプトで最大の柔軟性を実現するには、以下のセットアップを検討してください:**

- 主なシステムプロンプト（**例: LLMに特徴的な性格を与えるため**）を**一般**設定の**システムプロンプト**フィールドに割り当てます。これによりアカウント単位で設定され、**ワークスペース**セクション内のモデルで調整を必要とせず、すべてのLLMに対して目標システムプロンプトとして機能します。

- サブのシステムプロンプト（**例: LLMに特定のタスクを与えるため**）について、**チャットコントロール**サイドバー内の**システムプロンプト**フィールド（チャット単位）または管理者用**ワークスペース**セクション内の**モデル**セクション（モデル単位）のどちらに置くかを選択します。これにより、アカウントレベルのシステムプロンプトが**チャットコントロール**の提供するチャット単位のシステムプロンプト、または**モデル**が提供するモデル単位のシステムプロンプトと連携して機能します。

- 管理者としては、最適な柔軟性を確保するためにモデル単位でLLMパラメータを**モデル**セクションを使って割り当てる必要があります。これらのサブのシステムプロンプトについては、柔軟性を最大化し、アカウント単位またはチャット単位のインスタンスで必要な調整を最小化する方法で設定することが重要です。管理者のアカウントとすべてのユーザーアカウントが、**チャットコントロール**および**モデル**セクション内のシステムプロンプトが**LLM**に適用される優先順を理解することが必須です。
:::

---
sidebar_position: 2
title: "🎙️ マイクアクセス問題のトラブルシューティング"
---

アプリケーションが適切なマイクアクセスを持つことは、音声入力に依存する機能の動作に不可欠です。このガイドでは、特にセキュアなコンテキスト下でのマイクの権限を管理およびトラブルシューティングする方法を解説します。

## セキュアコンテキストを理解する 🔒

セキュリティ上の理由から、マイクへのアクセスはHTTPSで配信されたページまたは`localhost`からローカルで提供されるページに制限されています。この要件は、データを安全なチャネルを通じて送信することで保護するためのものです。

## よくある権限問題 🚫

Chrome、Brave、Microsoft Edge、Opera、Vivaldi、そしてFirefoxのようなブラウザは、非HTTPSのURLでのマイクアクセスを制限します。これは通常、同じネットワーク内の別のデバイスからサイトにアクセスする場合に問題になります（例：デスクトップサーバーにモバイル電話でアクセスする場合）。以下は、これらの問題を管理するための方法です:

### 非HTTPS接続に対する解決方法

1. **HTTPSの設定:**
   - サーバーでHTTPSをサポートするように設定することを強く推奨します。これにより権限問題が解決するだけでなく、データ送信のセキュリティも向上します。

2. **一時的なブラウザフラグ（慎重に使用すること）:**
   - これらの設定はブラウザに特定の非安全URLを安全であるかのように扱わせるものです。開発目的には役立ちますが、大きなセキュリティリスクを伴います。主要ブラウザでの設定方法はこちら:

   #### Chromiumベースのブラウザ（例: Chrome、Brave）
   - `chrome://flags/#unsafely-treat-insecure-origin-as-secure`を開きます。
   - 非HTTPSアドレスを入力します（例: `http://192.168.1.35:3000`）。
   - 変更を適用するためにブラウザを再起動します。

   #### Firefoxベースのブラウザ
   - `about:config`を開きます。
   - `dom.securecontext.allowlist`という文字列値を検索し、修正または作成します。
   - IPアドレスをカンマで区切って入力します（例: `http://127.0.0.1:8080`）。

### 注意事項とリスク 🚨

ブラウザフラグは迅速な解決策を提供しますが、重要なセキュリティチェックを回避することで、デバイスやデータが脆弱性にさらされる可能性があります。特に本番環境を計画する場合は、常に適切なセキュリティ対策を優先してください。

これらのベストプラクティスに従うことで、アプリケーションが適切にマイクにアクセスし、データのセキュリティと整合性を維持することができます。
---
sidebar_position: 20
title: "üí° Argumentos Especiais"
---

:::warning
Este tutorial √© uma contribui√ß√£o da comunidade e n√£o √© suportado pela equipe do Open WebUI. Ele serve apenas como uma demonstra√ß√£o de como personalizar o Open WebUI para seu caso de uso espec√≠fico. Quer contribuir? Confira o tutorial de contribui√ß√£o.
:::

# üí° Argumentos Especiais

Ao desenvolver seus pr√≥prios `Tools`, `Functions` (`Filters`, `Pipes` ou `Actions`), `Pipelines`, etc, voc√™ pode usar argumentos especiais para explorar o espectro completo do que o Open-WebUI tem a oferecer.

Esta p√°gina pretende detalhar o tipo e a estrutura de cada argumento especial, bem como fornecer um exemplo.

### `body`

Um `dict` geralmente destinado a ir quase diretamente ao modelo. Embora n√£o seja estritamente um argumento especial, est√° inclu√≠do aqui para refer√™ncia mais f√°cil e porque ele mesmo cont√©m alguns argumentos especiais.

<details>
<summary>Exemplo</summary>

```json

{
  "stream": true,
  "model": "meu-modelo-incr√≠vel",
  # string em min√∫sculas com palavras separadas por h√≠fen: este √© o ID do modelo
  "messages": [
    {
      "role": "user",
      "content": [
        {
          "type": "text",
          "text": "O que h√° nesta imagem?"
        },
        {
          "type": "image_url",
          "image_url": {
            "url": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdYAAAGcCAYAAABk2YF[REDACTED]"
            # Imagens s√£o passadas como dados codificados em base64
          }
        }
      ]
    },
    {
      "role": "assistant",
      "content": "A imagem parece ser [REDACTED]"
    },
  ],
  "features": {
    "image_generation": false,
    "code_interpreter": false,
    "web_search": false
  },
  "stream_options": {
    "include_usage": true
  },
  "metadata": "[O mesmo dict de __metadata__]",
  "files": "[A mesma lista que __files__]"
}


```

</details>

### `__user__`

Um `dict` com informa√ß√µes do usu√°rio.

Observe que, se a classe `UserValves` estiver definida, sua inst√¢ncia deve ser acessada via `__user__["valves"]`. Caso contr√°rio, o par chave-valor `valves` est√° ausente por completo de `__user__`.

<details>
<summary>Exemplo</summary>

```json
{
  "id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
  "email": "cheesy_dude@openwebui.com",
  "name": "Patrick",
  "role": "user",
  # fun√ß√£o pode ser `user` ou `admin`
  "valves": "[a inst√¢ncia de UserValve]"
}
```

</details>

### `__metadata__`

Um `dict` com informa√ß√µes abrangentes sobre o chat, modelo, arquivos, etc.

<details>
<summary>Exemplo</summary>

```json
{
  "user_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
  "chat_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
  "message_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
  "session_id": "xxxxxxxxxxxxxxxxxxxx",
  "tool_ids": null,
  # tool_ids √© uma lista de strings.
  "tool_servers": [],
  "files": "[Igual ao body[files]]",
  # Se nenhum arquivo for fornecido, a chave de arquivos existe em __metadata__ e seu valor √© []
  "features": {
    "image_generation": false,
    "code_interpreter": false,
    "web_search": false
  },
  "variables": {
    "{{USER_NAME}}": "cheesy_username",
    "{{USER_LOCATION}}": "Desconhecido",
    "{{CURRENT_DATETIME}}": "2025-02-02 XX:XX:XX",
    "{{CURRENT_DATE}}": "2025-02-02",
    "{{CURRENT_TIME}}": "XX:XX:XX",
    "{{CURRENT_WEEKDAY}}": "Segunda-feira",
    "{{CURRENT_TIMEZONE}}": "Europa/Berlim",
    "{{USER_LANGUAGE}}": "pt-BR"
  },
  "model": "[O mesmo dict de __model__]",
  "direct": false,
  "function_calling": "native",
  "type": "resposta_do_usuario",
  "interface": "open-webui"
}

```

</details>

### `__model__`

Um `dict` com informa√ß√µes sobre o modelo.

<details>
<summary>Exemplo</summary>

```json
{
  "id": "meu-modelo-incr√≠vel",
  "name": "Meu Modelo Incr√≠vel",
  "object": "model",
  "created": 1746000000,
  "owned_by": "openai",
  # pode ser openai ou ollama
  "info": {
      "id": "meu-modelo-incr√≠vel",
      "user_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
      "base_model_id": "gpt-4o",
      # este √© o nome do modelo que o endpoint do modelo fornece
      "name": "Meu Modelo Incr√≠vel",
      "params": {
      "system": "Voc√™ √© meu melhor assistente. Voc√™ responde [REDACTED]",
      "function_calling": "native"
      # op√ß√µes personalizadas aparecem aqui, por exemplo "Top K"
      },
      "meta": {
      "profile_image_url": "/static/favicon.png",
      "description": "Descri√ß√£o do meu-modelo-incr√≠vel",
      "capabilities": {
          "vision": true,
          "usage": true,
          "citations": true
      },
      "position": 17,
      "tags": [
          {
          "name": "para_amigos"
          },
          {
          "name": "vis√£o_habilitada"
          }
      ],
      "suggestion_prompts": null
          "name": "vision_enabled"
      }
  ]
}

```

</details>

### `__mensagens__`

Uma `lista` das mensagens anteriores.

Veja o valor `body["messages"]` acima.


### `__id_de_chat__`

O `str` do `chat_id`.

Veja o valor `__metadata__["chat_id"]` acima.

### `__id_de_sessao__`

O `str` do `session_id`.

Veja o valor `__metadata__["session_id"]` acima.

### `__id_de_mensagem__`

O `str` do `message_id`.

Veja o valor `__metadata__["message_id"]` acima.

### `__emissor_de_evento__`

Um `Callable` usado para exibir informa√ß√µes do evento ao usu√°rio.

### `__chamada_de_evento__`

Um `Callable` usado para `A√ß√µes`.

### `__arquivos__`

Uma `lista` de arquivos enviados via chat. Observe que imagens n√£o s√£o consideradas arquivos e s√£o enviadas diretamente ao modelo como parte da lista `body["messages"]`.

O bin√°rio real do arquivo n√£o faz parte dos argumentos por raz√µes de desempenho, mas o arquivo permanece acess√≠vel por seu caminho, se necess√°rio. Por exemplo, usando `docker`, a sintaxe Python para o caminho pode ser:

```python
from pathlib import Path

o_arquivo = Path(f"/app/backend/data/uploads/{__files__[0]["files"]["id"]}_{__files__[0]["files"]["filename"]}")
assert o_arquivo.exists()
```

Observe que o mesmo dicion√°rio de arquivos tamb√©m pode ser acessado via `__metadata__["files"]` (e seu valor √© `[]` se nenhum arquivo for enviado) ou via `body["files"]` (mas a chave `files` est√° completamente ausente de `body` se nenhum arquivo for enviado).

<details>
<summary>Exemplo</summary>

```json

[
  {
    "type": "file",
    "file": {
      "id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
      "filename": "Napole√£o - Wikipedia.pdf",
      "user_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
      "hash": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
      "data": {
        "content": "Napole√£o - Wikipedia\n\n\nNapole√£o I\n\nO Imperador Napole√£o em Seu Estudo nos\nTuileries, 1812\n\nImperador dos Franceses\n\n1¬∫ reinado 18 de maio de 1804 ‚Äì 6 de abril de 1814\n\nSucessor Lu√≠s XVIII[a]\n\n2¬∫ reinado 20 de mar√ßo de 1815 - 22 de junho de 1815\n\nSucessor Lu√≠s XVIII[a]\n\nPrimeiro C√¥nsul da Rep√∫blica Francesa\n\nNo cargo\n13 de dezembro de 1799 - 18 de maio de 1804\n\nNascido Napoleone Buonaparte\n15 de agosto de 1769\nAjaccio, C√≥rsega, Reino da\nFran√ßa\n\nFalecido 5 de maio de 1821 (idade¬†51)\nLongwood, Santa Helena\n\nEnterro 15 de dezembro de 1840\nLes Invalides, Paris\n\nNapole√£o\nNapole√£o Bonaparte[b] (nascido Napoleone\nBuonaparte;[1][c] 15 de agosto de 1769 - 5 de maio de 1821), mais tarde\nconhecido [REDACTED]",
        # O valor do conte√∫do √© a sa√≠da do analisador de documentos, o exemplo acima √© com Tika como analisador de documentos
      },
      "meta": {
        "name": "Napole√£o - Wikipedia.pdf",
        "content_type": "application/pdf",
        "size": 10486578,
        # em bytes, aqui cerca de 10Mb
        "data": {},
        "collection_name": "file-96xxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
        # sempre come√ßa com file
      },
      "created_at": 1740000000,
      "updated_at": 1740000000
    },
    "id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
    "url": "/api/v1/files/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
    "name": "Napole√£o - Wikipedia.pdf",
    "collection_name": "file-96xxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
    "status": "uploaded",
    "size": 10486578,
    "error": "",
    "itemId": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
    # itemId n√£o √© o mesmo que file["id"]
  }
]


```

</details>

### `__requisicao__`

Uma inst√¢ncia de `fastapi.Request`. Voc√™ pode ler mais na [p√°gina de migra√ß√£o](../../features/plugin/migration/index.mdx) ou na [documenta√ß√£o de fastapi](https://fastapi.tiangolo.com/reference/request/).

### `__tarefa__`

Um `str` para o tipo de tarefa. Seu valor √© apenas uma abrevia√ß√£o de `__metadata__["task"]` se presente, caso contr√°rio, `None`.

<details>
<summary>Valores poss√≠veis</summary>

```json

[
    "geracao_de_titulo",
    "geracao_de_tags",
    "geracao_de_emojis",
    "geracao_de_consulta",
    "geracao_de_prompt_de_imagem",
    "geracao_de_autocomplete",
    "chamada_de_funcao",
    "geracao_de_resposta_moa"
]
```

</details>

### `__corpo_da_tarefa__`

Um `dict` contendo o `body` necess√°rio para realizar uma determinada `__tarefa__`. Seu valor √© apenas uma abrevia√ß√£o de `__metadata__["task_body"]` se presente, caso contr√°rio, `None`.

Sua estrutura √© a mesma de `body` acima, com modifica√ß√µes como o uso do modelo apropriado e mensagem do sistema, etc.


### `__ferramentas__`

Uma `lista` de inst√¢ncias de `ToolUserModel`.

Para detalhes dos atributos das inst√¢ncias `ToolUserModel`, o c√≥digo pode ser encontrado em [tools.py](https://github.com/open-webui/open-webui/blob/main/backend/open_webui/models/tools.py).


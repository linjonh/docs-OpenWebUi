---
sidebar_position: 3
title: "üï∏Ô∏è Diagramas de Rede"
---

Aqui, fornecemos diagramas claros e estruturados para ajud√°-lo a entender como diversos componentes da rede interagem em diferentes configura√ß√µes. Esta documenta√ß√£o foi criada para usu√°rios de macOS/Windows e Linux. Cada cen√°rio √© ilustrado usando diagramas Mermaid para mostrar como as intera√ß√µes s√£o configuradas dependendo das diferentes configura√ß√µes de sistema e estrat√©gias de implanta√ß√£o.

## Op√ß√µes de Configura√ß√£o no Mac OS/Windows üñ•Ô∏è

### Ollama no Host, Open WebUI no Container

Neste cen√°rio, `Ollama` √© executado diretamente na m√°quina host, enquanto `Open WebUI` opera dentro de um container Docker.

```mermaid
C4Context
Boundary(b0, "M√°quina Host - Mac OS/Windows") {
   Person(user, "Usu√°rio")
   Boundary(b1, "VM Linux do Docker Desktop") {
      Component(openwebui, "Open WebUI", "Escutando na porta 8080")
   }
   Component(ollama, "Ollama", "Escutando na porta 11434")
}
Rel(openwebui, ollama, "Faz chamadas de API via proxy Docker", "http://host.docker.internal:11434")
Rel(user, openwebui, "Faz solicita√ß√µes via porta exposta -p 3000:8080", "http://localhost:3000")
UpdateRelStyle(user, openwebui, $offsetX="-100", $offsetY="-50")
```

### Ollama e Open WebUI em Pilha Compose

Ambos `Ollama` e `Open WebUI` s√£o configurados dentro da mesma pilha Docker Compose, simplificando as comunica√ß√µes de rede.

```mermaid
C4Context
Boundary(b0, "M√°quina Host - Mac OS/Windows") {
   Person(user, "Usu√°rio")
   Boundary(b1, "VM Linux do Docker Desktop") {
      Boundary(b2, "Pilha Compose") {
         Component(openwebui, "Open WebUI", "Escutando na porta 8080")
         Component(ollama, "Ollama", "Escutando na porta 11434")
      }
   }
}
Rel(openwebui, ollama, "Faz chamadas de API via rede entre containers", "http://ollama:11434")
Rel(user, openwebui, "Faz solicita√ß√µes via porta exposta -p 3000:8080", "http://localhost:3000")
UpdateRelStyle(user, openwebui, $offsetX="-100", $offsetY="-50")
```

### Ollama e Open WebUI, Redes Separadas

Aqui, `Ollama` e `Open WebUI` s√£o implantados em redes Docker separadas, potencialmente levando a problemas de conectividade.

```mermaid
C4Context
Boundary(b0, "M√°quina Host - Mac OS/Windows") {
   Person(user, "Usu√°rio")
   Boundary(b1, "VM Linux do Docker Desktop") {
      Boundary(b2, "Rede A") {
         Component(openwebui, "Open WebUI", "Escutando na porta 8080")
      }
      Boundary(b3, "Rede B") {
         Component(ollama, "Ollama", "Escutando na porta 11434")
      }
   }
}
Rel(openwebui, ollama, "N√£o √© poss√≠vel conectar")
Rel(user, openwebui, "Faz solicita√ß√µes via porta exposta -p 3000:8080", "http://localhost:3000")
UpdateRelStyle(user, openwebui, $offsetX="-100", $offsetY="-50")
```

### Open WebUI na Rede do Host

Nesta configura√ß√£o, `Open WebUI` utiliza a rede do host, o que impacta sua capacidade de conectar em determinados ambientes.

```mermaid
C4Context
Boundary(b0, "M√°quina Host - Mac OS/Windows") {
   Person(user, "Usu√°rio")
   Boundary(b1, "VM Linux do Docker Desktop") {
      Component(openwebui, "Open WebUI", "Escutando na porta 8080")
   }
}
Rel(user, openwebui, "N√£o √© poss√≠vel conectar, a rede do host √© a rede da VM")
UpdateRelStyle(user, openwebui, $offsetX="-100", $offsetY="-50")
```


## Op√ß√µes de Configura√ß√£o no Linux üêß

### Ollama no Host, Open WebUI no Container (Linux)

Este diagrama √© espec√≠fico para a plataforma Linux, com `Ollama` executando no host e `Open WebUI` implantado dentro de um container Docker.

```mermaid
C4Context
Boundary(b0, "M√°quina Host - Linux") {
   Person(user, "Usu√°rio")
   Boundary(b1, "Rede de Containers") {
      Component(openwebui, "Open WebUI", "Escutando na porta 8080")
   }
   Component(ollama, "Ollama", "Escutando na porta 11434")
}
Rel(openwebui, ollama, "Faz chamadas de API via proxy Docker", "http://host.docker.internal:11434")
Rel(user, openwebui, "Faz solicita√ß√µes via porta exposta -p 3000:8080", "http://localhost:3000")
UpdateRelStyle(user, openwebui, $offsetX="-100", $offsetY="-50")
```

### Ollama e Open WebUI em Pilha Compose (Linux)

Uma configura√ß√£o onde `Ollama` e `Open WebUI` residem na mesma pilha Docker Compose, permitindo uma rede simplificada no Linux.

```mermaid
C4Context
Boundary(b0, "M√°quina Host - Linux") {
   Person(user, "Usu√°rio")
   Boundary(b1, "Rede de Containers") {
      Boundary(b2, "Pilha Compose") {
         Component(openwebui, "Open WebUI", "Escutando na porta 8080")
         Component(ollama, "Ollama", "Escutando na porta 11434")
      }
   }
}
Rel(openwebui, ollama, "Faz chamadas de API via rede entre containers", "http://ollama:11434")
Rel(user, openwebui, "Faz solicita√ß√µes via porta exposta -p 3000:8080", "http://localhost:3000")
UpdateRelStyle(user, openwebui, $offsetX="-100", $offsetY="-50")
```

### Ollama e Open WebUI, Redes Separadas (Linux)

Um cen√°rio no qual `Ollama` e `Open WebUI` est√£o em redes Docker diferentes em um ambiente Linux, o que pode dificultar a conectividade.

```mermaid
C4Context
Boundary(b0, "M√°quina Hospedeira - Linux") {
   Person(user, "Usu√°rio")
   Boundary(b2, "Rede de Cont√™iner A") {
      Component(openwebui, "Open WebUI", "Escutando na porta 8080")
   }
   Boundary(b3, "Rede de Cont√™iner B") {
      Component(ollama, "Ollama", "Escutando na porta 11434")
   }
}
Rel(openwebui, ollama, "Incapaz de conectar")
Rel(user, openwebui, "Faz solicita√ß√µes atrav√©s da porta exposta -p 3000:8080", "http://localhost:3000")
UpdateRelStyle(user, openwebui, $offsetX="-100", $offsetY="-50")
```

### Open WebUI na Rede Host, Ollama no Host (Linux)

Uma configura√ß√£o ideal onde tanto o `Open WebUI` quanto o `Ollama` utilizam a rede do host, facilitando uma intera√ß√£o perfeita em sistemas Linux.

```mermaid
C4Context
Boundary(b0, "M√°quina Hospedeira - Linux") {
   Person(user, "Usu√°rio")
   Component(openwebui, "Open WebUI", "Escutando na porta 8080")
   Component(ollama, "Ollama", "Escutando na porta 11434")
}
Rel(openwebui, ollama, "Faz chamadas de API via localhost", "http://localhost:11434")
Rel(user, openwebui, "Faz solicita√ß√µes atrav√©s da porta de escuta", "http://localhost:8080")
UpdateRelStyle(user, openwebui, $offsetX="-100", $offsetY="-50")
```

Cada configura√ß√£o aborda diferentes estrat√©gias de implanta√ß√£o e configura√ß√µes de rede para ajud√°-lo a escolher a melhor op√ß√£o para suas necessidades.

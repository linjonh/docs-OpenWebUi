---
sidebar_position: 300 
title: "üîÑ Atualizando Open WebUI"
---



## Por que meu Open WebUI n√£o est√° atualizando?

Para atualizar sua instala√ß√£o local do Docker do Open WebUI para a vers√£o mais recente dispon√≠vel, voc√™ pode usar o **Watchtower** ou atualizar manualmente o cont√™iner. Siga um dos passos abaixo para ser guiado na atualiza√ß√£o da sua imagem existente do Open WebUI.

### Atualiza√ß√£o Manual

1. **Pare e remova o cont√™iner atual**:

   Isso ir√° parar o cont√™iner em execu√ß√£o e remov√™-lo, mas n√£o excluir√° os dados armazenados no volume do Docker. (Substitua `open-webui` pelo nome do seu cont√™iner durante o processo de atualiza√ß√£o se ele for diferente.)

```bash
docker rm -f open-webui
```

2. **Puxe a imagem mais recente do Docker**:

   Isso atualizar√° a imagem do Docker, mas n√£o atualizar√° o cont√™iner em execu√ß√£o ou seus dados.

```bash
docker pull ghcr.io/open-webui/open-webui:main
```


:::info
**Remova quaisquer dados existentes no volume do Docker (N√ÉO RECOMENDADO, A MENOS QUE SEJA ABSOLUTAMENTE NECESS√ÅRIO!)**. Pule esta etapa completamente, se n√£o for necess√°ria, e v√° para a √∫ltima etapa:

   Se voc√™ quiser come√ßar do zero, pode remover os dados existentes no volume do Docker. Tenha cuidado, pois isso excluir√° todas as suas hist√≥rias de chat e outros dados.

   Os dados est√£o armazenados em um volume do Docker chamado `open-webui`. Voc√™ pode remov√™-lo com o seguinte comando:

```bash
docker volume rm open-webui
```
:::

3. **Inicie o cont√™iner novamente com a imagem atualizada e o volume existente anexado**:

   Se voc√™ n√£o removeu os dados existentes, isso iniciar√° o cont√™iner com a imagem atualizada e os dados existentes. Se voc√™ removeu os dados existentes, isso iniciar√° o cont√™iner com a imagem atualizada e um novo volume vazio. **Para suporte a GPU Nvidia, adicione `--gpus all` ao comando docker run**

```bash
docker run -d -p 3000:8080 -v open-webui:/app/backend/data --name open-webui ghcr.io/open-webui/open-webui:main
```

## Continuo sendo desconectado ap√≥s cada atualiza√ß√£o?
Se voc√™ se encontrar sendo desconectado ap√≥s cada atualiza√ß√£o, certifique-se de que `WEBUI_SECRET_KEY` esteja definido em suas vari√°veis de ambiente. Sem esta chave definida consistentemente, suas sess√µes de autentica√ß√£o podem ser invalidadas ap√≥s as atualiza√ß√µes.

Para definir `WEBUI_SECRET_KEY` de forma persistente, inclua-o ao executar o seu cont√™iner Docker:

```bash
docker run -d -p 3000:8080 -v open-webui:/app/backend/data --name open-webui -e WEBUI_SECRET_KEY=seu_secret_key ghcr.io/open-webui/open-webui:main
```

Ou, se estiver usando **docker-compose**, adicione-o na se√ß√£o `environment`:

```yml
version: 3
services:
  open-webui:
    image: ghcr.io/open-webui/open-webui:main
    ports:
      - "3000:8080"
    volumes:
      - open-webui:/app/backend/data
    environment:
      - WEBUI_SECRET_KEY=seu_secret_key
```

Para mais detalhes sobre configura√ß√µes de vari√°veis de ambiente, consulte a [documenta√ß√£o do Open WebUI sobre vari√°veis de seguran√ßa](https://docs.openwebui.com/getting-started/env-configuration#security-variables).

## Atualizando Open WebUI automaticamente com Watchtower

Voc√™ pode usar o [Watchtower](https://containrrr.dev/watchtower/) para automatizar o processo de atualiza√ß√£o do Open WebUI. Aqui est√£o tr√™s op√ß√µes:

### Op√ß√£o 1: Atualiza√ß√£o √∫nica

Voc√™ pode executar o Watchtower como uma atualiza√ß√£o √∫nica para parar o cont√™iner atual, puxar a imagem mais recente e iniciar um novo cont√™iner com a imagem atualizada e o volume existente anexado (**Para suporte a GPU Nvidia, adicione `--gpus all` ao comando docker run**):

```bash
docker run --rm --volume /var/run/docker.sock:/var/run/docker.sock containrrr/watchtower --run-once open-webui
```

### Op√ß√£o 2: Executando Watchtower como um cont√™iner separado

Voc√™ pode executar o Watchtower como um cont√™iner separado que monitora e atualiza seu cont√™iner Open WebUI:

```bash
docker run -d --name watchtower \
  --volume /var/run/docker.sock:/var/run/docker.sock \
  containrrr/watchtower -i 300 open-webui
```

Isso iniciar√° o Watchtower em modo desacoplado, monitorando seu cont√™iner Open WebUI para atualiza√ß√µes a cada 5 minutos.

### Op√ß√£o 3: Integrando o Watchtower com um arquivo `docker-compose.yml`

Voc√™ tamb√©m pode integrar o Watchtower com seu arquivo `docker-compose.yml` para automatizar atualiza√ß√µes do Open WebUI (**Para suporte a GPU Nvidia, adicione `--gpus all` ao comando docker run**):

```yml
version: 3
services:
  open-webui:
    image: ghcr.io/open-webui/open-webui:main
    ports:
      - "3000:8080"
    volumes:
      - open-webui:/app/backend/data

  watchtower:
    image: containrrr/watchtower
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    command: --interval 300 open-webui
    depends_on:
      - open-webui

volumes:
  open-webui:
```

Neste exemplo, o Watchtower √© integrado ao arquivo `docker-compose.yml` e monitora o cont√™iner Open WebUI para atualiza√ß√µes a cada 5 minutos.

## Dados persistentes em volumes do Docker

Os dados est√£o armazenados em um volume do Docker chamado `open-webui`. O caminho para o volume n√£o √© diretamente acess√≠vel, mas voc√™ pode inspecionar o volume com o seguinte comando:

```bash
docker volume inspect open-webui
```

Isso mostrar√° os detalhes do volume, incluindo o ponto de montagem, que geralmente est√° localizado em `/var/lib/docker/volumes/open-webui/_data`.  

No Windows 10 + WSL 2, volumes do Docker est√£o localizados aqui (digite no explorador de arquivos do Windows): 
- \\\wsl$\docker-desktop\mnt\docker-desktop-disk\data\docker\volumes

Para vers√µes mais antigas do Docker (anteriores ao Docker v26.1.4):
- \\\wsl$\docker-desktop-data\data\docker\volumes
- \\\wsl$\docker-desktop-data\version-pack-data\community\docker\volumes

_(Cr√©dito da resposta para Windows ao usu√°rio do StackOverflow sarye-haddadi; [link para o post original no SO](https://stackoverflow.com/questions/43181654/locating-data-volumes-in-docker-desktop-windows))_

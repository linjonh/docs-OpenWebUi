---
sidebar_position: 300 
title: "üîÑ Mise √† jour d'Open WebUI"
---



## Pourquoi mon Open WebUI ne se met-il pas √† jour ?

Pour mettre √† jour votre installation locale de Docker Open WebUI vers la derni√®re version disponible, vous pouvez utiliser **Watchtower** ou mettre √† jour manuellement le conteneur. Suivez l'une des √©tapes ci-dessous pour √™tre guid√© dans la mise √† jour de votre image existante d'Open WebUI.

### Mise √† jour manuelle

1. **Arr√™tez et supprimez le conteneur actuel** :

   Cela arr√™tera le conteneur en cours d'ex√©cution et le supprimera, mais cela ne supprimera pas les donn√©es stock√©es dans le volume Docker. (Remplacez `open-webui` par le nom de votre conteneur tout au long du processus de mise √† jour si c'est diff√©rent.)

```bash
docker rm -f open-webui
```

2. **R√©cup√©rez la derni√®re image Docker** :

   Cela mettra √† jour l'image Docker, mais cela ne mettra pas √† jour le conteneur en cours d'ex√©cution ni ses donn√©es.

```bash
docker pull ghcr.io/open-webui/open-webui:main
```


:::info
**Supprimez toutes les donn√©es existantes dans le volume Docker (NON RECOMMAND√â SAUF EN CAS DE N√âCESSIT√â ABSOLUE !)**. Ignorez compl√®tement cette √©tape si elle n'est pas n√©cessaire et passez √† la derni√®re √©tape :

   Si vous souhaitez repartir de z√©ro, vous pouvez supprimer les donn√©es existantes dans le volume Docker. Faites attention, car cela supprimera tous vos historiques de chat et autres donn√©es.

   Les donn√©es sont stock√©es dans un volume Docker nomm√© `open-webui`. Vous pouvez le supprimer avec la commande suivante :

```bash
docker volume rm open-webui
```
:::

3. **Red√©marrez le conteneur avec l'image mise √† jour et le volume existant connect√©** :

   Si vous n'avez pas supprim√© les donn√©es existantes, cela d√©marrera le conteneur avec l'image mise √† jour et les donn√©es existantes. Si vous avez supprim√© les donn√©es existantes, cela d√©marrera le conteneur avec l'image mise √† jour et un nouveau volume vide. **Pour le support GPU Nvidia, ajoutez `--gpus all` √† la commande docker run**

```bash
docker run -d -p 3000:8080 -v open-webui:/app/backend/data --name open-webui ghcr.io/open-webui/open-webui:main
```

## √ätes-vous d√©connect√© apr√®s chaque mise √† jour ?
Si vous √™tes d√©connect√© apr√®s chaque mise √† jour, assurez-vous que `WEBUI_SECRET_KEY` est d√©fini dans vos variables d'environnement. Sans cette cl√© d√©finie de mani√®re coh√©rente, vos sessions d'authentification peuvent √™tre invalid√©es apr√®s les mises √† jour.

Pour d√©finir `WEBUI_SECRET_KEY` de mani√®re persistante, incluez-la lors de l'ex√©cution de votre conteneur Docker :

```bash
docker run -d -p 3000:8080 -v open-webui:/app/backend/data --name open-webui -e WEBUI_SECRET_KEY=your_secret_key ghcr.io/open-webui/open-webui:main
```

Ou, si vous utilisez **docker-compose**, ajoutez-la sous la section `environment` :

```yml
version: '3'
services:
  open-webui:
    image: ghcr.io/open-webui/open-webui:main
    ports:
      - "3000:8080"
    volumes:
      - open-webui:/app/backend/data
    environment:
      - WEBUI_SECRET_KEY=your_secret_key
```

Pour plus de d√©tails sur les param√®tres des variables d'environnement, consultez la [documentation Open WebUI sur les variables de s√©curit√©](https://docs.openwebui.com/getting-started/env-configuration#security-variables).

## Mise √† jour automatique d'Open WebUI avec Watchtower

Vous pouvez utiliser [Watchtower](https://containrrr.dev/watchtower/) pour automatiser le processus de mise √† jour d'Open WebUI. Voici trois options :

### Option 1 : Mise √† jour unique

Vous pouvez ex√©cuter Watchtower comme mise √† jour unique pour arr√™ter le conteneur actuel, r√©cup√©rer la derni√®re image, et d√©marrer un nouveau conteneur avec l'image mise √† jour et le volume existant connect√© (**Pour le support GPU Nvidia, ajoutez `--gpus all` √† la commande docker run**) :

```bash
docker run --rm --volume /var/run/docker.sock:/var/run/docker.sock containrrr/watchtower --run-once open-webui
```

### Option 2 : Ex√©cution de Watchtower comme conteneur s√©par√©

Vous pouvez ex√©cuter Watchtower comme un conteneur s√©par√© qui surveille et met √† jour votre conteneur Open WebUI :

```bash
docker run -d --name watchtower \
  --volume /var/run/docker.sock:/var/run/docker.sock \
  containrrr/watchtower -i 300 open-webui
```

Cela d√©marrera Watchtower en mode d√©tach√©, surveillant votre conteneur Open WebUI pour les mises √† jour toutes les 5 minutes.

### Option 3 : Int√©grer Watchtower avec un fichier `docker-compose.yml`

Vous pouvez √©galement int√©grer Watchtower avec votre fichier `docker-compose.yml` pour automatiser les mises √† jour d'Open WebUI (**Pour le support GPU Nvidia, ajoutez `--gpus all` √† la commande docker run**) :

```yml
version: '3'
services:
  open-webui:
    image: ghcr.io/open-webui/open-webui:main
    ports:
      - "3000:8080"
    volumes:
      - open-webui:/app/backend/data

  watchtower:
    image: containrrr/watchtower
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    command: --interval 300 open-webui
    depends_on:
      - open-webui

volumes:
  open-webui:
```

Dans cet exemple, Watchtower est int√©gr√© avec le fichier `docker-compose.yml` et surveille le conteneur Open WebUI pour les mises √† jour toutes les 5 minutes.

## Donn√©es persistantes dans les volumes Docker

Les donn√©es sont stock√©es dans un volume Docker nomm√© `open-webui`. Le chemin vers le volume n'est pas directement accessible, mais vous pouvez inspecter le volume avec la commande suivante :

```bash
docker volume inspect open-webui
```

Cela affichera les d√©tails du volume, y compris le point de montage, qui est g√©n√©ralement situ√© dans `/var/lib/docker/volumes/open-webui/_data`.  

Sur Windows 10 + WSL 2, les volumes Docker sont situ√©s ici (√† saisir dans l'explorateur de fichiers Windows)¬†:
- \\\wsl$\docker-desktop\mnt\docker-desktop-disk\data\docker\volumes

Pour les anciennes versions de Docker (avant Docker v26.1.4)¬†:
- \\\wsl$\docker-desktop-data\data\docker\volumes
- \\\wsl$\docker-desktop-data\version-pack-data\community\docker\volumes

_(R√©ponse Windows cr√©dit√©e √† l'utilisateur StackOverflow sarye-haddadi¬†; [lien vers le post SO original](https://stackoverflow.com/questions/43181654/locating-data-volumes-in-docker-desktop-windows))_

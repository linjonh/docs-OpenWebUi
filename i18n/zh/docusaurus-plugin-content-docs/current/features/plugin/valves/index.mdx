---
sidebar_position: 3
title: "ğŸ”„ é˜€é—¨"
---

## é˜€é—¨

é˜€é—¨å’Œç”¨æˆ·é˜€é—¨ç”¨äºå…è®¸ç”¨æˆ·æä¾›åŠ¨æ€ç»†èŠ‚ï¼Œä¾‹å¦‚ API å¯†é’¥æˆ–é…ç½®é€‰é¡¹ã€‚è¿™äº›å°†åœ¨ GUI èœå•ä¸­ä¸ºç»™å®šåŠŸèƒ½åˆ›å»ºä¸€ä¸ªå¯å¡«å†™çš„å­—æ®µæˆ–ä¸€ä¸ªå¸ƒå°”å¼€å…³ã€‚å®ƒä»¬æ€»æ˜¯å¯é€‰çš„ï¼Œä½†å¼ºçƒˆæ¨èä½¿ç”¨ã€‚

å› æ­¤ï¼Œé˜€é—¨å’Œç”¨æˆ·é˜€é—¨ç±»å¯ä»¥åœ¨ `Pipe`ã€`Pipeline`ã€`Filter` æˆ– `Tools` ç±»ä¸­å®šä¹‰ã€‚

é˜€é—¨ä»…ç”±ç®¡ç†å‘˜é€šè¿‡å·¥å…·æˆ–åŠŸèƒ½èœå•é…ç½®ã€‚è€Œç”¨æˆ·é˜€é—¨å¯ä»¥ç”±ä»»ä½•ç”¨æˆ·ç›´æ¥ä»èŠå¤©ä¼šè¯ä¸­é…ç½®ã€‚

<details>
<summary>æ³¨é‡Šç¤ºä¾‹</summary>

```python

from pydantic import BaseModel, Field
from typing import Literal

# å®šä¹‰å’Œé˜€é—¨
class Filter:
   # æ³¨æ„å½“å‰çš„ç¼©è¿›ï¼šé˜€é—¨å’Œç”¨æˆ·é˜€é—¨å¿…é¡»è¢«å£°æ˜ä¸º
   # Toolsã€Filter æˆ– Pipe ç±»çš„å±æ€§ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬ä»¥
   # Filter ä¸ºä¾‹ã€‚
    class Valves(BaseModel):
       # é˜€é—¨å’Œç”¨æˆ·é˜€é—¨ç»§æ‰¿è‡ª pydantics BaseModelã€‚è¿™
       # å¯ç”¨å¤æ‚çš„ä½¿ç”¨åœºæ™¯ï¼Œå¦‚æ¨¡å‹éªŒè¯ç­‰ã€‚
       test_valve: int = Field(  # æ³¨æ„ç±»å‹æç¤ºï¼šå®ƒç”¨äº
           # é€‰æ‹©æ˜¾ç¤ºç»™ç”¨æˆ·çš„ UI å…ƒç´ ç§ç±»ï¼ˆæŒ‰é’®ã€
           # æ–‡æœ¬ç­‰ï¼‰ã€‚
           default=4,
           description="æ§åˆ¶æ•°å€¼çš„ä¸€ä¸ªé˜€é—¨"
           # required=False,  # ä½ å¯ä»¥é€šè¿‡è®¾ç½®ä¸º True å¼ºåˆ¶å­—æ®µä¸ºå¿…å¡«
       )
       # ä¸ºäº†è®©ç”¨æˆ·åœ¨å¤šä¸ªå­—ç¬¦ä¸²ä¹‹é—´è¿›è¡Œé€‰æ‹©ï¼Œå¯ä»¥ä½¿ç”¨ typing çš„ Literalï¼š
       choice_option: Literal["choiceA", "choiceB"] = Field(
           default="choiceA",
           description="ä¸€ä¸ªå¤šé€‰é˜€é—¨çš„ç¤ºä¾‹"
       )
       priority: int = Field(
           default=0,
           description="è¿‡æ»¤æ“ä½œçš„ä¼˜å…ˆçº§ã€‚è¾ƒä½çš„å€¼ä¼˜å…ˆé€šè¿‡"
       )
       # priority å­—æ®µæ˜¯å¯é€‰çš„ï¼Œä½†å¦‚æœå­˜åœ¨ï¼Œå°†ç”¨äº
       # å¯¹è¿‡æ»¤å™¨è¿›è¡Œæ’åºã€‚
       pass
       # æ³¨æ„ï¼Œè¿™é‡Œçš„ pass æœ‰åŠ©äºè§£æï¼Œå› æ­¤æ¨èä½¿ç”¨ã€‚

   # ç”¨æˆ·é˜€é—¨çš„å®šä¹‰æ–¹å¼ç›¸åŒã€‚
    class UserValves(BaseModel):
        test_user_valve: bool = Field(
            default=False, description="ä¸€ä¸ªç”¨æˆ·é˜€é—¨æ§åˆ¶ä¸€ä¸ªå¼€/å…³ï¼ˆæˆ–çœŸ/å‡ï¼‰å¼€å…³"
       )
       pass

   def __init__(self):
       self.valves = self.Valves()
       # å› ä¸ºå®ƒä»¬æ˜¯ç”±ç®¡ç†å‘˜è®¾ç½®çš„ï¼Œå› æ­¤åœ¨ä»£ç æ‰§è¡Œæ—¶å¯ä»¥ç›´æ¥è®¿é—®ã€‚
       pass

   # inlet æ–¹æ³•ä»…ç”¨äºè¿‡æ»¤å™¨ï¼Œä½† __user__ å¤„ç†æ–¹å¼ç›¸åŒ
   def inlet(self, body: dict, __user__: dict):
       # ç”±äºç”¨æˆ·é˜€é—¨æ˜¯æŒ‰ç”¨æˆ·å®šä¹‰çš„ï¼Œå› æ­¤å®ƒä»¬ä»…åœ¨ä½¿ç”¨æ—¶å¯ç”¨ã€‚
       # æ³¨æ„ï¼Œå°½ç®¡ __user__ æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œ__user__["valves"] æ˜¯ä¸€ä¸ª
       # ç”¨æˆ·é˜€é—¨å¯¹è±¡ã€‚å› æ­¤ï¼Œä½ å¯ä»¥åƒè¿™æ ·è®¿é—®å€¼ï¼š
       test_user_valve = __user__["valves"].test_user_valve
       # æˆ–è€…ï¼š
       test_user_valve = dict(__user__["valves"])["test_user_valve"]
       # ä½†è¿™å°†è¿”å›é»˜è®¤å€¼ï¼Œè€Œä¸æ˜¯å®é™…å€¼ï¼š
       # test_user_valve = __user__["valves"]["test_user_valve"]  # ä¸è¦è¿™æ ·åšï¼
```

</details>

---
sidebar_position: 4
title: "üöö –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏ –º–∏–≥—Ä–∞—Ü–∏–∏: 0.4 –∫ 0.5"
---

# üöö –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏: Open WebUI 0.4 –∫ 0.5

–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ Open WebUI 0.5! –ï—Å–ª–∏ –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ –Ω–∞–¥ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –∏–ª–∏ —Å–æ–∑–¥–∞–µ—Ç–µ –Ω–æ–≤—ã–µ, —ç—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –º–µ–∂–¥—É **–≤–µ—Ä—Å–∏–µ–π 0.4 –∏ 0.5** –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç –ø–æ–Ω—è—Ç–Ω—ã–π –ø–ª–∞–Ω –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–∞—à–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π. –°–¥–µ–ª–∞–µ–º —ç—Ç–æ—Ç –ø–µ—Ä–µ—Ö–æ–¥ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–ª–∞–≤–Ω—ã–º! üòä

---

## üßê –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –∏ –ø–æ—á–µ–º—É?

–í Open WebUI 0.5 –º—ã –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–ª–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –ø—Ä–æ–µ–∫—Ç **–ø—Ä–æ—â–µ, –±–æ–ª–µ–µ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–º**. –í–æ—Ç –æ—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è:

- **–°—Ç–∞—Ä–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** üéØ –†–∞–Ω–µ–µ Open WebUI –±—ã–ª –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã **–ø–æ–¥–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π**, –≥–¥–µ –∫–∞–∂–¥–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `ollama`, `openai`) –±—ã–ª–æ –æ—Ç–¥–µ–ª—å–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º FastAPI. –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏.
- **–ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** üöÄ –í –≤–µ—Ä—Å–∏–∏ 0.5 –º—ã –ø–µ—Ä–µ—à–ª–∏ –∫ **–æ–¥–Ω–æ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é FastAPI** —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ **–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–∞–º–∏**. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –ª—É—á—à—É—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é, —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ç–æ–∫ –∏ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏.

### –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
–í–æ—Ç –æ–±–∑–æ—Ä —Ç–æ–≥–æ, —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:
1. **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±—ã–ª–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω—ã –≤ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä—ã.**
   - –†–∞–Ω–µ–µ: `open_webui.apps`
   - –¢–µ–ø–µ—Ä—å: `open_webui.routers`

2. **–û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —É–ø—Ä–æ—â–µ–Ω–∞.**
   - –°—Ç–∞—Ä–æ–µ `open_webui.apps.webui` –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–æ –≤ `open_webui.main`, —Å—Ç–∞–≤ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π —Ç–æ—á–∫–æ–π –≤—Ö–æ–¥–∞ –≤ –ø—Ä–æ–µ–∫—Ç.

3. **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω–µ—á–Ω–∞—è —Ç–æ—á–∫–∞ API**
   - –í Open WebUI 0.5 –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ **—É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è**, `chat_completion`, –≤ `open_webui.main`, –∑–∞–º–µ–Ω—è—é—â–∞—è –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –º–æ–¥–µ–ª–µ–π, —Ç–∞–∫–∏—Ö –∫–∞–∫ `ollama` –∏ `openai`. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –∏ —É–¥–æ–±–Ω—ã–π API-–æ–ø—ã—Ç. –û–¥–Ω–∞–∫–æ **–ø—Ä—è–º—ã–º –ø—Ä–µ–µ–º–Ω–∏–∫–æ–º** —ç—Ç–∏—Ö –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π —è–≤–ª—è–µ—Ç—Å—è `generate_chat_completion` –∏–∑ `open_webui.utils.chat`. –ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–µ–Ω –ø—Ä–æ—Å—Ç–æ–π POST-–∑–∞–ø—Ä–æ—Å –±–µ–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ–∞–π–ª–æ–≤, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∏–ª–∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö), —ç—Ç–∞ —É—Ç–∏–ª–∏—Ç–∞, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –ø–æ–¥–æ–π–¥–µ—Ç –≤–∞–º.

#### –ü—Ä–∏–º–µ—Ä:
```python
# –ü–æ–ª–Ω—ã–π API-–ø–æ—Ç–æ–∫ —Å –ø–∞—Ä—Å–µ—Ä–æ–º (–Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è):
from open_webui.main import chat_completion

# –õ–µ–≥–∫–∏–π, –ø—Ä—è–º–æ–π POST-–∑–∞–ø—Ä–æ—Å (–ø—Ä—è–º–æ–π –ø—Ä–µ–µ–º–Ω–∏–∫):
from open_webui.utils.chat import generate_chat_completion
```

–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –ª—É—á—à–µ –≤—Å–µ–≥–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤–∞—à–µ–º—É —Å–ª—É—á–∞—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è!

4. **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã —Ñ—É–Ω–∫—Ü–∏–π.**
   - –°–∏–≥–Ω–∞—Ç—É—Ä—ã —Ñ—É–Ω–∫—Ü–∏–π —Ç–µ–ø–µ—Ä—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –Ω–æ–≤–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É, —Ç—Ä–µ–±—É—è –æ–±—ä–µ–∫—Ç `request`.
   - –û–±—ä–µ–∫—Ç `request` –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å, –∏—Å–ø–æ–ª—å–∑—É—è –ø–∞—Ä–∞–º–µ—Ç—Ä `__request__` –≤ —Å–∏–≥–Ω–∞—Ç—É—Ä–µ —Ñ—É–Ω–∫—Ü–∏–∏. –í–æ—Ç –ø—Ä–∏–º–µ—Ä:

```python
class Pipe:
    def __init__(self):
        pass

    async def pipe(
        self,
        body: dict,
        __user__: dict,
        __request__: Request, # –ù–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä
    ) -> str:
        # –ù–∞–ø–∏—à–∏—Ç–µ –∑–¥–µ—Å—å —Å–≤–æ—é —Ñ—É–Ω–∫—Ü–∏—é
```

üìå **–ü–æ—á–µ–º—É –º—ã –≤–Ω–µ—Å–ª–∏ —ç—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è?**
- –ß—Ç–æ–±—ã —É–ø—Ä–æ—Å—Ç–∏—Ç—å –∫–æ–¥–æ–≤—É—é –±–∞–∑—É –∏ —Å–¥–µ–ª–∞—Ç—å –µ—ë –ª–µ–≥—á–µ —Ä–∞—Å—à–∏—Ä—è–µ–º–æ–π –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–π.
- –î–ª—è —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ API, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –±–æ–ª–µ–µ —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π –æ–ø—ã—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤.
- –î–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–∞ —Å—á–µ—Ç –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏–∏ –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.

---

## ‚úÖ –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏

–°–ª–µ–¥—É–π—Ç–µ —ç—Ç–æ–º—É —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤—É, —á—Ç–æ–±—ã –ø–ª–∞–≤–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç.

---

### üîÑ 1. –ü–µ—Ä–µ—Ö–æ–¥ –æ—Ç `apps` –∫ `routers` 

–í—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±—ã–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã –∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω—ã –≤ `open_webui.routers`. –≠—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –∏–º–ø–æ—Ä—Ç –≤ –≤–∞—à–µ–π –∫–æ–¥–æ–≤–æ–π –±–∞–∑–µ.

–ë—ã—Å—Ç—Ä—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è –ø—É—Ç–µ–π –∏–º–ø–æ—Ä—Ç–∞:

| **–°—Ç–∞—Ä—ã–π –ø—É—Ç—å**                   | **–ù–æ–≤—ã–π –ø—É—Ç—å**                    |
|-----------------------------------|-----------------------------------|
| `open_webui.apps.ollama`          | `open_webui.routers.ollama`       |
| `open_webui.apps.openai`          | `open_webui.routers.openai`       |
| `open_webui.apps.audio`           | `open_webui.routers.audio`        |
| `open_webui.apps.retrieval`       | `open_webui.routers.retrieval`    |
| `open_webui.apps.webui`           | `open_webui.main`                 |


### üìú –í–∞–∂–Ω—ã–π –ø—Ä–∏–º–µ—Ä  

–ß—Ç–æ–±—ã —É—Ç–æ—á–Ω–∏—Ç—å –æ—Å–æ–±—ã–π —Å–ª—É—á–∞–π –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (`webui`), –≤–æ—Ç –ø—Ä–æ—Å—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ:  

- **–ë—ã–ª–æ –≤ `webui`?** –¢–µ–ø–µ—Ä—å –æ–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏–ª–∏ `open_webui.main`.  
- –ù–∞–ø—Ä–∏–º–µ—Ä:  
    - **–î–æ (0.4):**  
      ```python  
      from open_webui.apps.webui.models import SomeModel  
      ```  
    - **–ü–æ—Å–ª–µ (0.5):**  
      ```python  
      from open_webui.models import SomeModel  
      ```  

–í –æ–±—â–µ–º, **–ø—Ä–æ—Å—Ç–æ –∑–∞–º–µ–Ω–∏—Ç–µ `open_webui.apps` –Ω–∞ `open_webui.routers`, –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º `webui`, –∫–æ—Ç–æ—Ä—ã–π —Ç–µ–ø–µ—Ä—å —è–≤–ª—è–µ—Ç—Å—è `open_webui.main`!**


---

### üë©‚Äçüíª 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –∏–º–ø–æ—Ä—Ç–∞

–î–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç —ç—Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –≤–∞—à–µ–º –∫–æ–¥–µ:

#### –î–æ:
```python
from open_webui.apps.ollama import main as ollama
from open_webui.apps.openai import main as openai
```

#### –ü–æ—Å–ª–µ:
```python
# –ò–º–ø–æ—Ä—Ç –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–æ–≤
from open_webui.routers.ollama import generate_chat_completion
from open_webui.routers.openai import generate_chat_completion

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∫–æ–Ω–µ—á–Ω—É—é —Ç–æ—á–∫—É
from open_webui.main import chat_completion
```

**üí° –°–æ–≤–µ—Ç:** –û—Ç–¥–∞–≤–∞–π—Ç–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–µ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–æ–Ω–µ—á–Ω–æ–π —Ç–æ—á–∫–µ (`chat_completion`) –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –∏ –±—É–¥—É—â–µ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

### üìù **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ: –≤—ã–±–æ—Ä –º–µ–∂–¥—É `main.chat_completion` –∏ `utils.chat.generate_chat_completion`**

–í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∞—à–∏—Ö –∑–∞–¥–∞—á, –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å:

1. **`open_webui.main.chat_completion`:**
    - –°–∏–º—É–ª–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ POST-–∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ `/api/chat/completions`.
    - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ñ–∞–π–ª—ã, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –¥—Ä—É–≥–∏–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏.
    - –õ—É—á—à–∏–π –≤—ã–±–æ—Ä, –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–ª–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã —Å API –≤—ã–ø–æ–ª–Ω—è–ª—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

2. **`open_webui.utils.chat.generate_chat_completion`:**
    - –í—ã–ø–æ–ª–Ω—è–µ—Ç –ø—Ä—è–º–æ–π POST-–∑–∞–ø—Ä–æ—Å –±–µ–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏–ª–∏ –∑–∞–¥–∞—á.
    - –≠—Ç–æ **–ø—Ä—è–º–æ–π –ø—Ä–µ–µ–º–Ω–∏–∫** –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π `main.generate_chat_completions`, `ollama.generate_chat_completion` –∏ `openai.generate_chat_completion` –≤ Open WebUI 0.4.
    - –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–Ω—ã—Ö –∏ –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.

#### –ü—Ä–∏–º–µ—Ä:
```python
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ API —Å –ø–∞—Ä—Å–∏–Ω–≥–æ–º:
from open_webui.main import chat_completion

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–Ω–æ–≥–æ –ø—Ä—è–º–æ–≥–æ POST-–∑–∞–ø—Ä–æ—Å–∞:
from open_webui.utils.chat import generate_chat_completion
```

---

### üìã 3. –ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º —Å–∏–≥–Ω–∞—Ç—É—Ä–∞–º —Ñ—É–Ω–∫—Ü–∏–π

–ú—ã –æ–±–Ω–æ–≤–∏–ª–∏ **—Å–∏–≥–Ω–∞—Ç—É—Ä—ã —Ñ—É–Ω–∫—Ü–∏–π**, —á—Ç–æ–±—ã –æ–Ω–∏ –ª—É—á—à–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ. –ï—Å–ª–∏ –≤—ã –∏—â–µ—Ç–µ –ø—Ä—è–º—É—é –∑–∞–º–µ–Ω—É, –Ω–∞—á–Ω–∏—Ç–µ —Å –ª–µ–≥–∫–æ–≤–µ—Å–Ω–æ–π —Å–ª—É–∂–µ–±–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ `generate_chat_completion` –∏–∑ `open_webui.utils.chat`. –î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ API –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–æ–≤—É—é —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é `chat_completion` –≤ `open_webui.main`.

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–∏–≥–Ω–∞—Ç—É—Ä —Ñ—É–Ω–∫—Ü–∏–π:

| **–°—Ç–∞—Ä–∞—è**                                | **–ü—Ä—è–º–æ–π –ø—Ä–µ–µ–º–Ω–∏–∫ (–Ω–æ–≤–∞—è)**             | **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç (–Ω–æ–≤–∞—è)**     |
|------------------------------------------|------------------------------------------|------------------------------------------|
| `openai.generate_chat_completion(form_data: dict, user: UserModel)` | `generate_chat_completion(request: Request, form_data: dict, user: UserModel)` | `chat_completion(request: Request, form_data: dict, user: UserModel)` |

- **–ü—Ä—è–º–æ–π –ø—Ä–µ–µ–º–Ω–∏–∫ (`generate_chat_completion`)**: –õ–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è –∑–∞–º–µ–Ω–∞ 1:1 –¥–ª—è –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –º–µ—Ç–æ–¥–æ–≤ `ollama`/`openai`.  
- **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç (`chat_completion`)**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ API, –≤–∫–ª—é—á–∞—è –ø–∞—Ä—Å–∏–Ω–≥ —Ñ–∞–π–ª–æ–≤ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏.  

#### –ü—Ä–∏–º–µ—Ä:

–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `chat_completion`, –≤–æ—Ç –∫–∞–∫ –¥–æ–ª–∂–Ω–∞ –≤—ã–≥–ª—è–¥–µ—Ç—å –≤–∞—à–∞ —Ñ—É–Ω–∫—Ü–∏—è —Ç–µ–ø–µ—Ä—å:

### üõ†Ô∏è –ö–∞–∫ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞—Ç—å –≤–∞—à—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é —Ñ—É–Ω–∫—Ü–∏—é
–î–∞–≤–∞–π—Ç–µ –ø–µ—Ä–µ–ø–∏—à–µ–º –ø—Ä–∏–º–µ—Ä —Ñ—É–Ω–∫—Ü–∏–∏, —á—Ç–æ–±—ã –æ–Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ:

#### –î–æ (0.4):
```python
from pydantic import BaseModel
from open_webui.apps.ollama import generate_chat_completion

class User(BaseModel):
    id: str
    email: str
    name: str
    role: str

class Pipe:
    def __init__(self):
        pass

    async def pipe(self, body: dict, __user__: dict) -> str:
        # –í—ã–∑–æ–≤ –∫–æ–Ω–µ—á–Ω–æ–π —Ç–æ—á–∫–∏ OpenAI
        user = User(**__user__)
        body["model"] = "llama3.2:latest"
        return await ollama.generate_chat_completion(body, user)
```

#### –ü–æ—Å–ª–µ (0.5):
```python
from pydantic import BaseModel
from fastapi import Request

from open_webui.utils.chat import generate_chat_completion


class User(BaseModel):
    id: str
    email: str
    name: str
    role: str


class Pipe:
    def __init__(self):
        pass

    async def pipe(
        self,
        body: dict,
        __user__: dict,
        __request__: Request,
    ) -> str:
        # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∫–æ–Ω–µ—á–Ω—É—é —Ç–æ—á–∫—É —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–π —Å–∏–≥–Ω–∞—Ç—É—Ä–æ–π
        user = User(**__user__)
        body["model"] = "llama3.2:latest"
        return await generate_chat_completion(__request__, body, user)
```

### –í–∞–∂–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è:
- –í—ã –¥–æ–ª–∂–Ω—ã –ø–µ—Ä–µ–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç `Request` (`__request__`) –≤ –Ω–æ–≤–æ–π —Å–∏–≥–Ω–∞—Ç—É—Ä–µ —Ñ—É–Ω–∫—Ü–∏–∏.
- –î—Ä—É–≥–∏–µ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `__user__` –∏ `__event_emitter__`) –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –≥–∏–±–∫–æ—Å—Ç—å –¥–ª—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

---

### üåü 4. –†–µ–∑—é–º–µ: –∫–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –ø—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º

–í–æ—Ç –∫—Ä–∞—Ç–∫–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞, —á—Ç–æ–±—ã –∑–∞–ø–æ–º–Ω–∏—Ç—å:
- **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ —Ä–æ—É—Ç–µ—Ä—ã:** –û–±–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã —Å `open_webui.apps` ‚û°Ô∏è `open_webui.routers`.
- **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω–µ—á–Ω–∞—è —Ç–æ—á–∫–∞:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `open_webui.main.chat_completion` –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è, –µ—Å–ª–∏ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω—ã –∫–∞–∫ `ollama`, —Ç–∞–∫ –∏ `openai`.
- **–ê–¥–∞–ø—Ç–∞—Ü–∏—è —Å–∏–≥–Ω–∞—Ç—É—Ä —Ñ—É–Ω–∫—Ü–∏–π:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–µ—Ä–µ–¥–∞—é—Ç —Ç—Ä–µ–±—É–µ–º—ã–π –æ–±—ä–µ–∫—Ç `request`.

---

## üéâ –£—Ä–∞! –í—ã –≥–æ—Ç–æ–≤—ã!

–í—ã —É—Å–ø–µ—à–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–ª–∏ —Å **Open WebUI 0.4 –Ω–∞ 0.5**. –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–≤ –∏–º–ø–æ—Ä—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É—è —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∫–æ–Ω–µ—á–Ω—É—é —Ç–æ—á–∫—É –∏ –æ–±–Ω–æ–≤–∏–≤ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã —Ñ—É–Ω–∫—Ü–∏–π, –≤—ã –±—É–¥–µ—Ç–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –Ω–æ–≤–µ–π—à–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ —É–ª—É—á—à–µ–Ω–∏–π –≤–µ—Ä—Å–∏–∏ 0.5.

---

üí¨ **–í–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –æ—Ç–∑—ã–≤—ã?**
–ï—Å–ª–∏ –≤—ã —Å—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å —Å –∫–∞–∫–∏–º–∏-–ª–∏–±–æ –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –∏–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –Ω–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å –æ—Ç–∫—Ä—ã—Ç—å [GitHub issue](https://github.com/open-webui/open-webui) –∏–ª–∏ –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –Ω–∞ —Ñ–æ—Ä—É–º–∞—Ö —Å–æ–æ–±—â–µ—Å—Ç–≤–∞!

–£–¥–∞—á–Ω–æ–≥–æ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è! ‚ú®
---
sidebar_position: 30
title: "üîó –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Redis Websocket"
---

:::warning
–≠—Ç–æ—Ç —É—á–µ–±–Ω–∏–∫ —è–≤–ª—è–µ—Ç—Å—è –≤–∫–ª–∞–¥–æ–º —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ –∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π Open WebUI. –û–Ω —Å–ª—É–∂–∏—Ç —Ç–æ–ª—å–∫–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–µ–π —Ç–æ–≥–æ, –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Open WebUI –ø–æ–¥ –≤–∞—à–∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏. –•–æ—Ç–∏—Ç–µ –≤–Ω–µ—Å—Ç–∏ —Å–≤–æ–π –≤–∫–ª–∞–¥? –û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ–º –ø–æ –≤–∫–ª–∞–¥—É.
:::

# üîó –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Redis Websocket

## –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–ù–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –æ–ø–∏—Å–∞–Ω—ã —à–∞–≥–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Redis —Å Open WebUI –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ websocket. –°–ª–µ–¥—É—è —ç—Ç–∏–º —à–∞–≥–∞–º, –≤—ã —Å–º–æ–∂–µ—Ç–µ –≤–∫–ª—é—á–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é websocket –≤ –≤–∞—à–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä–µ Open WebUI, —á—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –æ–±–µ—Å–ø–µ—á–∏—Ç—å –æ–±–º–µ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–∞–º–∏ –∏ –≤–∞—à–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º.

### –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —É—Å–ª–æ–≤–∏—è

* –î–µ–π—Å—Ç–≤—É—é—â–∏–π —ç–∫–∑–µ–º–ø–ª—è—Ä Open WebUI (–≤–µ—Ä—Å–∏–∏ 1.0 –∏–ª–∏ –≤—ã—à–µ)
* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä Redis (–≤ –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º `docker.io/valkey/valkey:8.0.1-alpine`, –∫–æ—Ç–æ—Ä—ã–π –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º –≤—ã–ø—É—Å–∫–µ Redis 7.x)
* –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Docker Composer (–≤–µ—Ä—Å–∏–∏ 2.0 –∏–ª–∏ –≤—ã—à–µ)
* –°–µ—Ç—å Docker –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Å–≤—è–∑–∏ –º–µ–∂–¥—É Open WebUI –∏ Redis
* –ë–∞–∑–æ–≤—ã–µ –∑–Ω–∞–Ω–∏—è –æ Docker, Redis –∏ Open WebUI

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Redis

–ß—Ç–æ–±—ã –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Redis –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ websocket, –≤–∞–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `docker-compose.yml` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:

```yml
version: 3.9
services:
  redis:
    image: docker.io/valkey/valkey:8.0.1-alpine
    container_name: redis-valkey
    volumes:
      - redis-data:/data
    command: "valkey-server --save 30 1"
    healthcheck:
      test: "[ $$(valkey-cli ping) = PONG ]"
      start_period: 5s
      interval: 1s
      timeout: 3s
      retries: 5
    restart: unless-stopped
    cap_drop:
      - ALL
    cap_add:
      - SETGID
      - SETUID
      - DAC_OVERRIDE
    logging:
      driver: "json-file"
      options:
        max-size: "1m"
        max-file: "1"
    networks:
      - openwebui-network

volumes:
  redis-data:

networks:
  openwebui-network:
    external: true
```

:::info –ó–∞–º–µ—Ç–∫–∏

–î–∏—Ä–µ–∫—Ç–∏–≤–∞ `ports` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —ç—Ç–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, —Ç–∞–∫ –∫–∞–∫ –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –æ–Ω–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è. –°–µ—Ä–≤–∏—Å Redis –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ç–∏ Docker –¥–ª—è —Å–ª—É–∂–±—ã Open WebUI. –û–¥–Ω–∞–∫–æ, –µ—Å–ª–∏ –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —ç–∫–∑–µ–º–ø–ª—è—Ä—É Redis –∏–∑–≤–Ω–µ —Å–µ—Ç–∏ Docker (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏–ª–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞), –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–∏—Ä–µ–∫—Ç–∏–≤—É `ports`, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç Redis (–Ω–∞–ø—Ä–∏–º–µ—Ä, `6379:6379`).

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä Redis —Å –∏–º–µ–Ω–µ–º `redis-valkey` –∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç —Ç–æ–º –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö. –î–∏—Ä–µ–∫—Ç–∏–≤–∞ `healthcheck` –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –µ—Å–ª–∏ –æ–Ω –ø–µ—Ä–µ—Å—Ç–∞–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –∫–æ–º–∞–Ω–¥—É `ping`. –û–ø—Ü–∏—è –∫–æ–º–∞–Ω–¥—ã `--save 30 1` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö Redis –Ω–∞ –¥–∏—Å–∫ –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏, —á—Ç–æ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –∫–ª—é—á –±—ã–ª –∏–∑–º–µ–Ω–µ–Ω.

:::

–ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å —Å–µ—Ç—å Docker –¥–ª—è —Å–≤—è–∑–∏ –º–µ–∂–¥—É Open WebUI –∏ Redis, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É:

```bash
docker network create openwebui-network
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Open WebUI

–ß—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É websocket –≤ Open WebUI, –≤–∞–º –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –≤–∞—à–µ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ Open WebUI:

```bash
ENABLE_WEBSOCKET_SUPPORT="true"
WEBSOCKET_MANAGER="redis"
WEBSOCKET_REDIS_URL="redis://redis:6379/1"
```

–≠—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤–∫–ª—é—á–∞—é—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É websocket, —É–∫–∞–∑—ã–≤–∞—é—Ç Redis –∫–∞–∫ –º–µ–Ω–µ–¥–∂–µ—Ä websocket –∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç URL-–∞–¥—Ä–µ—Å Redis. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –∑–∞–º–µ–Ω–∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ `WEBSOCKET_REDIS_URL` –Ω–∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π IP-–∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ Redis.

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Docker –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Open WebUI –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –µ–≥–æ –∫ —Ç–æ–π –∂–µ —Å–µ—Ç–∏ Docker:

```bash
docker run -d \
  --name open-webui \
  --network openwebui-network \
  -v open-webui:/app/backend/data \
  -e ENABLE_WEBSOCKET_SUPPORT="true" \
  -e WEBSOCKET_MANAGER="redis" \
  -e WEBSOCKET_REDIS_URL="redis://127.0.0.1:6379/1" \
  ghcr.io/open-webui/open-webui:main
```

–ó–∞–º–µ–Ω–∏—Ç–µ `127.0.0.1` –Ω–∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π IP-–∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ Redis –≤ —Å–µ—Ç–∏ Docker.

## –ü—Ä–æ–≤–µ—Ä–∫–∞

–ï—Å–ª–∏ –≤—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏ Redis –∏ Open WebUI, —Ç–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –≤–∞—à–µ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ Open WebUI –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –ª–æ–≥–∞—Ö:

`DEBUG:open_webui.socket.main:Using Redis to manage websockets.`

–≠—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç, —á—Ç–æ Open WebUI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Redis –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è websocket. –í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É `docker exec`, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä Redis –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:

```bash
docker exec -it redis-valkey redis-cli -p 6379 ping
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–æ–ª–∂–Ω–∞ –≤—ã–≤–µ—Å—Ç–∏ `PONG`, –µ—Å–ª–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä Redis —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–ª–µ–¥—É—é—â—É—é:

```bash
docker exec -it redis-valkey valkey-cli -p 6379 ping
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

–ï—Å–ª–∏ –≤—ã —Å—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏ —Å Redis –∏–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π websocket –≤ Open WebUI, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Å–ª–µ–¥—É—é—â–∏–º —Ä–µ—Å—É—Ä—Å–∞–º –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –Ω–µ–ø–æ–ª–∞–¥–æ–∫:

* [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Redis](https://redis.io/docs)
* [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Docker Compose](https://docs.docker.com/compose/overview/)
* [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è sysctl](https://man7.org/linux/man-pages/man8/sysctl.8.html)
